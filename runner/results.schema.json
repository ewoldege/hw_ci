{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "HWCI Results",
  "type": "object",
  "required": ["run_id", "repo", "sha", "started_at", "finished_at", "status", "stages", "artifacts_dir"],
  "properties": {
    "run_id": {"type": "string"},
    "repo": {"type": "string"},
    "sha": {"type": "string"},
    "plan": {"type": "string"},
    "started_at": {"type": "string"},
    "finished_at": {"type": "string"},
    "status": {"type": "string", "enum": ["passed", "failed"]},
    "artifacts_dir": {"type": "string"},
    "checkout_dir": {"type": "string"},
    "stages": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["name", "type", "status", "started_at", "finished_at", "exit_code", "log"],
        "properties": {
          "name": {"type": "string"},
          "type": {"type": "string", "enum": ["lint", "build", "sim"]},
          "status": {"type": "string", "enum": ["passed", "failed", "skipped"]},
          "started_at": {"type": "string"},
          "finished_at": {"type": "string"},
          "exit_code": {"type": "integer"},
          "log": {"type": "string"},
          "binary": {"type": "string"}
        }
      }
    }
  }
}
